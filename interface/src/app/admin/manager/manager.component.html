<script src="../../@core/data/modulestate.service.spec.ts" xmlns="http://www.w3.org/1999/html"></script>
<nb-reveal-card #revealpage full-heigth full-heigth-all-child>
    <nb-card-front full-heigth full-heigth-all-child>
        <nb-card nostylecard full-heigth full-heigth-all-child>

            <div class="row" full-heigth>


                <div class="col-md-5 row">


                    <div class="col-md-6" half-heigth padingreversed>


                        <nb-card full-heigth full-heigth-all-child>

                            <nb-card-header noborder style="text-align: center !important">
                                <div title>Roles</div>

                                <ngx-one-input-form [placeholder]="roleplaceholder"
                                                    (newItem)="onAddRole($event)"></ngx-one-input-form>

                                                    <br>
                                                    <div style="width:100%"   *ngIf="userIsSuperAdmin()" >

                                                      <input type="checkbox"  [(ngModel)]="userIsAdmin" nbInput ><span style="font-size: 14px;"> Asscoier au administrations des modules selectionnées : </span> <br>

                                                    </div>

                            </nb-card-header>


                            <nb-card-body>

                                <nb-list full-heigth>


                                    <nb-list-item (click)="ToggleSelectedRole(role,$event)"
                                                  [ngClass]="{'selectedListr' : role.roleId == selectedrole ,'adminRole' : role.roleGroup == 1 }"
                                                  menuPadding
                                                  *ngFor="let role of roles" forceOverFlow >


                                        <div containerFlex>
                                            <div inlineelement>
                                            </div>
                                            <div inlineelement>
                                                <input-edit [iseditable]="editable" (onSave)="saveRole(role)"
                                                            [(value)]='role.roleLibelle'
                                                            [full]="true"></input-edit>

                                            </div>
                                            <div inlineelement>
                                                <i colorPrimary ActionIcone
                                                   [ngClass]="{'fa-link' : role.roleId == selectedrole  }"
                                                   class="fa "> </i>
                                                <i colorPrimary ActionIcone (click)="deleteRole(role)"
                                                   class="fa fa-times"> </i>
                                            </div>
                                        </div>

                                    </nb-list-item>
                                </nb-list>

                            </nb-card-body>

                        </nb-card>


                    </div>

                    <div class="col-md-6" half-heigth padingreversed>

                        <nb-flip-card #flipuser full-heigth full-heigth-all-child>
                            <nb-card-front full-heigth full-heigth-all-child>


                                <nb-card full-heigth full-heigth-all-child>

                                    <nb-card-header displayingride noborder style="text-align: center !important">
                                        <div title>Utilisateurs</div>
                                        <ngx-one-input-form [placeholder]="utilisateurplaceholder"
                                                            (onkeyUp)="onSearchUser($event)"
                                                            (newItem)="onAddUser($event)"></ngx-one-input-form>
                                    </nb-card-header>
                                    <nb-card-body>


                                        <nb-list>
                                            <nb-list-item *ngFor="let usr of users"
                                                          [ngClass]="{'selectedList' : roleInUserRole(usr.role)  }"
                                                          (click)="ToggleSelectUser(usr,$event)" menuPadding>
                                                <div containerFlex>
                                                    <div inlineelement>
                                                        <strong>{{usr.UserName}}</strong>
                                                    </div>
                                                    <div inlineelement>

                                                        <i colorPrimary ActionIcone
                                                           [ngClass]="{'fa-check-circle' : roleInUserRole(usr.role)}"
                                                           *ngIf="selectedrole != ''" class="fa"></i>
                                                        <i colorPrimary ActionIcone (click)="deleteUser(usr)"
                                                           class="fa fa-times"> </i>


                                                    </div>
                                                </div>
                                            </nb-list-item>
                                        </nb-list>


                                    </nb-card-body>

                                </nb-card>


                            </nb-card-front>
                            <nb-card-back (click)="stopClick($event)" full-heigth full-heigth-all-child>


                                <nb-card full-heigth full-heigth-all-child>

                                    <nb-card-header noborder>
                                        <div title>Ajouter un utilisateur</div>
                                    </nb-card-header>
                                    <nb-card-body>

                                        <form [formGroup]="userformcontrole" (ngSubmit)="onSubmitUserDetails()">
                                            <input type="text" [(ngModel)]="userform.UserName" nbInput fullWidth
                                                   fieldSize="medium" placeholder="Nom"
                                                   formControlName="username"><br><br>
                                            <input type="text" [(ngModel)]="userform.UserEmail" nbInput fullWidth
                                                   fieldSize="medium" placeholder="E-mail"
                                                   formControlName="useremail"><br><br>
                                            <input type="password" [(ngModel)]="userform.UserPasworld" nbInput fullWidth
                                                   fieldSize="medium" placeholder="Mot de passe"
                                                   formControlName="userpasword"><br><br>
                                            <input type="password" nbInput fullWidth fieldSize="medium"
                                                   placeholder="Mot de passe" formControlName="secandpass"><br><br>
                                            <button style="margin-right: 10px;" [disabled]="!userformcontrole.valid"
                                                    nbButton
                                                    type="submit" size="xsmall">
                                                Sauvegarder
                                            </button>

                                            <button (click)="flipusers.flipped = false" nbButton type="submit"
                                                    size="xsmall">
                                                Annuler
                                            </button>
                                        </form>

                                    </nb-card-body>

                                </nb-card>


                            </nb-card-back>
                        </nb-flip-card>

                    </div>


                    <div class="col-md-12" half-heigth>
                        <nb-card full-heigth>

                            <nb-card-header noborder>
                                <div title>Access au données :
                                    <select (click)="stopClick($event)" (change)="dataOnSelectedEntity($event)">
                                        <option [value]="0">-</option>
                                        <option *ngFor="let entitie of entities" [value]="entitie.entityId">
                                            {{entitie.entityEntity}}
                                        </option>
                                    </select>

                                    Mode :

                                    <select (click)="stopClick($event)" (change)="garantAccess($event)">
                                        <option value="0"> Pas d'access</option>
                                        <option value="1"> in</option>
                                        <option value="2"> not in (Tous sauf)</option>
                                    </select>
                                </div>
                            </nb-card-header>

                            <nb-card-body>


                                <table class="table table-striped">
                                    <thead>
                                    <tr>
                                        <th *ngFor="let datafield of getDataAccessField(dataSelectedEntity)">
                                            <strong>{{datafield.fieldEntityName}}</strong>
                                        </th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let datas of accessData" (click)="roleDataAccess(datas,$event)"
                                        [ngClass]="{'selectedListr' : roleInRoleData(datas.role)  }">
                                        <td *ngFor="let datafield of getDataAccessField(dataSelectedEntity)">
                                            {{datas[datafield.fieldEntityName]}}
                                        </td>
                                        <td>
                                            <i colorPrimary ActionIcone
                                               [ngClass]="{'fa-check-circle' : roleInRoleData(datas.role)}"
                                               *ngIf="selectedrole != ''" class="fa"></i>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>

                            </nb-card-body>

                        </nb-card>

                    </div>


                </div>


                <div class="col-md-2">

                    <nb-card full-heigth>


                        <nb-card-header noborder>
                            <div title>Menu principale</div>
                            <ngx-one-input-form [placeholder]="menuplaceholder"
                                                (newItem)="onAddMenu($event)"></ngx-one-input-form>

                        </nb-card-header>


                        <nb-card-body>


                            <nb-list full-heigth>


                                <nb-list-item menuPadding *ngFor="let menu of menus" forceOverFlow
                                              (click)="stopClick($event)">


                                    <div containerFlex>
                                        <div inlineelement><i colorPrimary ActionIcone
                                                              [nbPopover]="popContent"
                                                              nbPopoverPlacement="right" class="fa fa-caret-down"></i>
                                        </div>
                                        <div inlineelement>
                                            <input-edit [iseditable]="editable" (onSave)="saveMenu(menu)"
                                                        [(value)]='menu.menuLibelle'
                                                        [full]="true"></input-edit>

                                        </div>
                                        <div inlineelement>
                                            <i colorPrimary ActionIcone (click)="deleteMenu(menu)"
                                               class="fa fa-times"> </i>
                                        </div>
                                    </div>


                                    <ng-template #popContent>


                                        <div submenuheader> {{menu.menuLibelle}}</div>

                                        <div style="height: 150px;">

                                            <nb-list full-heigth style="width: 300px;" dndDropzone class="dndList"
                                                     (dndDrop)="onDropMenuList($event, menu.link, menu)">

                                                <nb-list-item [ngClass]="{'selectedList' : roleInLinkRole(lnk.role)  }"
                                                              (click)="ToggleSelectLink(lnk,$event)" menuPadding
                                                              *ngFor="let lnk of menu.link" forceOverFlow
                                                              [dndDraggable]="lnk"
                                                              dndEffectAllowed="move"
                                                              (dndMoved)="onDragged(lnk,  menu.link)">


                                                    <div containerFlex>

                                                        <div inlineelement>
                                                            <input-edit [iseditable]="editable" (onSave)="saveMenu(lnk)"
                                                                        [(value)]='lnk.menuLibelle'
                                                                        [full]="true"></input-edit>
                                                        </div>

                                                        <div inlineelement>
                                                            <i colorPrimary ActionIcone
                                                               [ngClass]="{'fa-check-circle' : roleInLinkRole(lnk.role)}"
                                                               *ngIf="selectedrole != ''" class="fa"></i>
                                                        </div>

                                                    </div>

                                                </nb-list-item>

                                            </nb-list>
                                        </div>


                                    </ng-template>


                                </nb-list-item>


                            </nb-list>


                        </nb-card-body>

                    </nb-card>

                </div>


                <div class="col-md-2">

                    <nb-card full-heigth>

                        <nb-card-header noborder>
                            <div title>Interfaces</div>
                        </nb-card-header>

                        <nb-card-body>

                            <nb-list dndDropzone class="dndList" (dndDrop)="onDropLinkList($event, link)" full-heigth>

                                <nb-list-item [ngClass]="{'selectedList' : roleInLinkRole(lnk.role)  }"
                                              (click)="ToggleSelectLink(lnk,$event)" menuPadding
                                              *ngFor="let lnk of link"
                                              forceOverFlow dndPlaceholderRef
                                              [dndDraggable]="lnk"
                                              dndEffectAllowed="move" (dndMoved)="onDragged(lnk, link)">
                                    <div containerFlex>
                                        <div inlineelement>
                                            <input-edit [iseditable]="editable" (onSave)="saveMenu(lnk)"
                                                        [(value)]='lnk.menuLibelle'
                                                        [full]="true"></input-edit>
                                        </div>
                                        <div inlineelement>
                                            <i colorPrimary ActionIcone
                                               [ngClass]="{'fa-check-circle' : roleInLinkRole(lnk.role)}"
                                               *ngIf="selectedrole != ''" class="fa"></i>
                                        </div>
                                    </div>

                                </nb-list-item>


                                <nb-list-item dndPlaceholderRef></nb-list-item>


                            </nb-list>


                        </nb-card-body>

                    </nb-card>


                </div>

                <div class="col-md-3">

                    <nb-card full-heigth>

                        <nb-card-header noborder>
                            Actions
                        </nb-card-header>

                        <nb-card-body>

                            <nb-list full-heigth>

                                <nb-list-item [ngClass]="{'selectedList' : roleInLinkRole(ap.role)}"
                                              (click)="ToggleSelectAp(ap,$event)" menuPadding *ngFor="let ap of aps"
                                              forceOverFlow>
                                    <div containerFlex>
                                        <div inlineelement>
                                            {{ap.apLibelle}}
                                        </div>
                                        <div inlineelement>
                                            <i colorPrimary ActionIcone
                                               [ngClass]="{'fa-check-circle' : roleInLinkRole(ap.role)}"
                                               *ngIf="selectedrole != ''" class="fa"></i>
                                        </div>
                                    </div>

                                </nb-list-item>

                            </nb-list>


                        </nb-card-body>

                    </nb-card>


                </div>


            </div>
        </nb-card>
    </nb-card-front>

    <nb-card-back full-heigth full-heigth-all-child>

        <nb-card full-heigth full-heigth-all-child trasback>

            <div class="row" full-heigth>


                <div class="col-md-10 row mainWarp" full-heigth>

                    <div class="col-md-2" row style="height: 70%">


                        <nb-card half-heigth full-heigth-all-child (click)="trygerDeselecttion('selectedProcess')">


                            <nb-card-header>
                                <div title>Process</div>
                                <ngx-one-input-form [placeholder]="pprocessplaceholder"
                                                    (newItem)="onAddProcess($event)"></ngx-one-input-form>
                            </nb-card-header>

                            <nb-card-body>


                                <nb-list>
                                    <nb-list-item *ngFor="let proc of process" menuPadding
                                                  (click)="selectProcess(proc,$event)"
                                                  [ngClass]="{'selectedList' :  proc.processId == selectedProcess.processId  }">
                                        <div containerFlex>

                                            <div inlineelement>
                                                <strong>{{proc.processDesignation}}</strong>
                                            </div>

                                            <div inlineelement>

                                                <i colorPrimary ActionIcone
                                                   (click)="deleteProcess(proc.processId,$event)"
                                                   class="fa fa-times"> </i>

                                            </div>
                                        </div>
                                    </nb-list-item>
                                </nb-list>

                            </nb-card-body>


                        </nb-card>


                        <nb-flip-card #flipdim half-heigth full-heigth-all-child>

                            <nb-card-front full-heigth full-heigth-all-child>


                                <nb-card full-heigth full-heigth-all-child (click)="trygerDeselecttion('selectedEntityDimention')">

                                    <nb-card-header noborder style="text-align: center !important">
                                        <div title>Dimention</div>
                                        <button nbButton size="xsmall" (click)="onAddDim($event)">+</button>
                                    </nb-card-header>

                                    <nb-card-body>


                                        <nb-list>
                                            <nb-list-item *ngFor="let dimEnt of EntityDimention" menuPadding
                                                          (click)="selectEntityDimention(dimEnt,$event)"
                                                          [ngClass]="{'selectedList' :  dimEnt.entityId == selectedEntityDimention.entityId  }">
                                                <div containerFlex>
                                                    <div inlineelement>
                                                        <strong>{{dimEnt.entityEntity}}</strong>
                                                    </div>
                                                    <div inlineelement>

                                                        <i colorPrimary ActionIcone
                                                           class="fa fa-times"
                                                           (click)="deleteFldDim(dimEnt.entityId,'ent',$event)"> </i>


                                                    </div>
                                                </div>
                                            </nb-list-item>
                                        </nb-list>

                                        <nb-list>
                                            <nb-list-item *ngFor="let fieldim of FieldDimention" menuPadding
                                                          (click)="selectFieldDimention(fieldim,$event)"
                                                          [ngClass]="{'selectedList' :  fieldim.fieldId == selectedFieldDimention.fieldId  }">
                                                <div containerFlex>
                                                    <div inlineelement>
                                                        <strong>{{fieldim.fieldEntityName}}</strong>
                                                    </div>
                                                    <div inlineelement>

                                                        <i colorPrimary ActionIcone
                                                           class="fa fa-times"
                                                           (click)="deleteFldDim(fieldim.fieldId,'fld',$event)"> </i>


                                                    </div>
                                                </div>
                                            </nb-list-item>
                                        </nb-list>


                                    </nb-card-body>

                                </nb-card>


                            </nb-card-front>
                            <nb-card-back (click)="stopClick($event)" full-heigth full-heigth-all-child>


                                <nb-card full-heigth full-heigth-all-child>

                                    <nb-card-header noborder>
                                        <div title>Ajouter une liste</div>
                                    </nb-card-header>
                                    <nb-card-body>

                                        <form [formGroup]="dimformcontrole" (ngSubmit)="onSubmitDimDetails()">

                                            <input type="text" *ngIf="dimform.type == 2"
                                                   [ngModelOptions]="{standalone: true}" [(ngModel)]="dimform.fieldId"
                                                   nbInput fullWidth
                                                   fieldSize="xsmall" placeholder="Entity">

                                            <input *ngIf="dimform.type == 1" type="text"
                                                   [ngModelOptions]="{standalone: true}" [(ngModel)]="dimform.entityId"
                                                   nbInput fullWidth
                                                   fieldSize="xsmall" placeholder="Field">

                                            <select [ngModelOptions]="{standalone: true}" [(ngModel)]="dimform.type"
                                                    nbInput fullWidth fieldSize="xsmall" placeholder="Type">
                                                <option value="1">Entity field Asscoiation</option>
                                                <option value="2">Field</option>
                                            </select>

                                            <select [ngModelOptions]="{standalone: true}" [(ngModel)]="dimform.require"
                                                    nbInput fullWidth fieldSize="xsmall" placeholder="require">
                                                <option value="0">Non obligatoire</option>
                                                <option value="1">Obligatoire</option>
                                            </select>

                                            <br><br>

                                            <button style="margin-right: 10px;"
                                                    [disabled]="!dimformcontrole.valid"
                                                    nbButton
                                                    type="submit" size="xsmall">
                                                Ajouter
                                            </button>

                                            <button (click)="flipdim.flipped = false" nbButton type="submit"
                                                    size="xsmall">
                                                Annuler
                                            </button>
                                        </form>

                                    </nb-card-body>

                                </nb-card>


                            </nb-card-back>
                        </nb-flip-card>


                    </div>


                    <div class="col-md-10" style="height: 62%" (click)="stopClick($event)">
                        <div roleoption>
                            <i (click)="refrechRelationalEntity($event)"
                               style="font-size: 16px; margin-top: 10px;" class="fa fa-lock"></i>
                            Role<br>
                            <ng-select2 (click)="onRoleOptionClick($event)" [width]="200"
                                        [(ngModel)]="valueRole"
                                        (valueChanged)="setRoleValue($event)" ngControl="value"
                                        [data]="dataRole">

                            </ng-select2>
                        </div>
                        <br>

                        <nb-tabset full-heigth full-heigth-all-child>
                            <nb-tab tabTitle="Gestion des entitées" #entityTab full-heigth full-heigth-all-child>

                                <div id="plumbcontainer" style="height: 50%">

                                    <div entityoption>
                                        Rafréchir
                                        <i (click)="refrechRelationalEntity($event)"
                                           style="font-size: 16px; margin-top: 10px;" class="fa fa-refresh"></i>

                                    </div>

                                    <br><br>
                                    <div entityoption>

                                        <input type="text" style="width:auto;" [(ngModel)]="className" nbInput fullWidth
                                               fieldSize="xsmall" placeholder="Designation Entité"
                                        >
                                        <i (click)="addEntity($event)"
                                           style="font-size: 16px; margin-top: 10px;" class="fa fa-plus-circle"></i>

                                    </div>


                                    <div (click)="onSelectEntity(entitie)" entitiContainer
                                         *ngFor="let entitie of entities"
                                         id="ent_{{entitie.entityId}}" [id]='"ent_"+entitie.entityId'
                                         [style.top]="entitie.entityPos.split(',')[0]+'px'"
                                         [style.left]="entitie.entityPos.split(',')[1]+'px'"
                                         [ngClass]="{'ent_highlight' :  exist(entitie.entityId , selectedArborecence, 'entityId') ,'ent_highlight_action' :  exist(entitie.entityId , EntityAction, 'entityId')  ,'ent_highlight_list' :  exist(entitie.entityId , EntityList, 'entityId') }">
                                        <div *ngIf="entitie.entityModule.length == 0" linkToModule
                                             (click)="addentityToModule(entitie,$event)"><i class="fa fa-link"></i>
                                        </div>
                                        <div linkToModule
                                             (click)="regenerateEntity(entitie,$event)"><i class="fa fa-refresh"></i>
                                        </div>
                                        <div entityHead><strong>{{entitie.entityEntity}}</strong></div>

                                        <div entityField>

                                            <div fieldItem *ngFor="let field of entitie.fields"
                                                 (click)="onSelectField(field,$event ) "
                                                 id="field_{{entitie.entityId}}_{{field.fieldEntityName}}"
                                                 entityFieldHover>
                                                <div containerFlex>
                                                    <div inlineelement>
                                                        {{field.fieldEntityName}}
                                                    </div>
                                                    <div inlineelement>

                                                        <i #editUpdate colorInactive ActionIcone
                                                           [ngClass]="{'colorPrimary' :  viewFieldIsInAction(field)  }"
                                                           *ngIf="entityInEntityAction(entitie.entityId) && viewFieldIsInAction(field)"
                                                           (click)="setExpression(field,$event)"
                                                           class="fa fa-info"></i>

                                                        <i #editUpdate colorInactive ActionIcone
                                                           [ngClass]="{'colorPrimary' :  updateFieldIsInAction(field)  }"
                                                           *ngIf="entityInEntityAction(entitie.entityId) && viewFieldIsInAction(field)"
                                                           (click)="updateFieldInAction(field)"
                                                           class="fa fa-edit"></i>

                                                        <i #editUpdate colorInactive ActionIcone
                                                           [ngClass]="{'colorPrimary' :  updateFieldRequireIsInAction(field)  }"
                                                           *ngIf="entityInEntityAction(entitie.entityId) && updateFieldIsInAction(field)"
                                                           (click)="updateFieldRequireInAction(field)"
                                                           class="fa fa-lock"></i>

                                                        <i #viewUpdate colorInactive ActionIcone
                                                           [ngClass]="{'colorPrimary' :  viewFieldIsInAction(field)  }"
                                                           *ngIf="entityInEntityAction(entitie.entityId)"
                                                           (click)="viewFieldInAction(field)"
                                                           class="fa fa-th-list"></i>

                                                        <i #listUpdate colorInactive ActionIcone
                                                           [ngClass]="{'colorPrimary' :  fieldIsInList(field)  }"
                                                           *ngIf="entityInEntityList(entitie.entityId)"
                                                           (click)="updateFieldInList(field)"
                                                           class="fa fa-list-alt"></i>


                                                    </div>
                                                </div>
                                            </div>

                                            <!--  <div *ngFor="let rel of relations" entityFieldHover>
                                                  <div fieldItem *ngIf="rel.relationEntitie.entityEntity == entitie.entityEntity"
                                                       id="field_{{entitie.entityId}}_{{rel.relationKey}}">
                                                      <div containerFlex>
                                                          <div inlineelement>
                                                              {{rel.relationKey}}
                                                          </div>
                                                          <div inlineelement>
                                                              <i colorPrimary ActionIcone
                                                                 class="fa fa-check-circle"></i>
                                                          </div>

                                                      </div>
                                                  </div>
                                              </div> -->


                                        </div>

                                    </div>

                                </div>

                            </nb-tab>
                            <nb-tab tabTitle="Gestion des Données" #dataTab>
                                <i _ngcontent-c7="" (click)="addConnectionDialog($event)" class="fa fa-plus-circle"
                                   style="font-size: 16px; margin-top: 10px;"> Ajouter une connection </i><br><br>


                                <div connectionontainer *ngFor="let con of connections">

                                    <i class="fa fa-database"> </i> &nbsp; <span
                                        connectionLabel>{{con.connectionName}}</span> - <span connectionConfig>{{con.connectionDriver}} : {{con.connectionHost}} : {{con.connectionDbname}}</span>
                                    &nbsp; <i class="fab fa-searchengin" style="font-size: 18px;"
                                              (click)="addQueryDialog(con,$event)"></i> &nbsp; <i class="fa fa-times"
                                                                                                  style="font-size: 18px;"
                                                                                                  (click)="deleteConnections(con,$event)"> </i>

                                    <br> <br>

                                    <div queryContainer *ngFor="let qry of con.query" (click)="selectQuery(qry,$event)">
                                        {{qry.queryName}} &nbsp; <i
                                            class="fa fa-flash" (click)="getQueryResult(qry,$event)"> </i> &nbsp; <i
                                            class="fa fa-times" (click)="deleteQuery(qry,$event)"> </i></div>
                                </div>


                            </nb-tab>


                            <nb-tab #viewTab tabTitle="Gestion des rapports" full-heigth full-heigth-all-child>

                                <div class="row" full-heigth full-heigth-all-child *ngIf="selectedList.listType == 2">
                                    <div class="col-md-3">
                                        <nb-card full-heigth full-heigth-all-child>

                                            <nb-card-header noborder style="text-align: center !important">
                                                <div title>Section</div>
                                                <ngx-one-input-form [placeholder]="'Titre de section'"
                                                                    (newItem)="onAddSection($event)"></ngx-one-input-form>
                                            </nb-card-header>
                                            <nb-card-body>

                                                <nb-list>
                                                    <nb-list-item
                                                            *ngFor="let section of viewReportConfig[selectedList.listId].sections"
                                                            (click)="selectSection(section)"> {{section.tag}} / {{section.title}}
                                                    </nb-list-item>
                                                </nb-list>
                                                <button nbButton size="xsmall" (click)="saveListe()" >Sauvegarder le rapport</button>

                                            </nb-card-body>
                                        </nb-card>
                                    </div>
                                    <div class="col-md-9">
                                        <nb-card full-heigth full-heigth-all-child>

                                            <nb-card-header noborder style="text-align: center !important">
                                                <div title>Rendu</div>
                                            </nb-card-header>
                                            <nb-card-body full-heigth full-heigth-all-child>

                                                <div style="height:9% !important;" class="row">
                                                    <div class="col-md-10" style="margin-bottom: 10px;">
                                                        <table class="table containerselector">
                                                            <tbody>
                                                            <tr>
                                                                <td [ngClass]="{  'lasttviewtab' : containeSelectorWidth == 1 }"
                                                                    (click)="setSelectorContainerwidth(1)"
                                                                    class="firstviewtab">1
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 2 , 'lasttviewtab' : containeSelectorWidth == 2 }"
                                                                    (click)="setSelectorContainerwidth(2)"> 2
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 3 , 'lasttviewtab' : containeSelectorWidth == 3}"
                                                                    (click)="setSelectorContainerwidth(3)"> 3
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 4 , 'lasttviewtab' : containeSelectorWidth == 4}"
                                                                    (click)="setSelectorContainerwidth(4)"> 4
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 5 , 'lasttviewtab' : containeSelectorWidth == 5}"
                                                                    (click)="setSelectorContainerwidth(5)"> 5
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 6 , 'lasttviewtab' : containeSelectorWidth == 6}"
                                                                    (click)="setSelectorContainerwidth(6)"> 6
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 7 , 'lasttviewtab' : containeSelectorWidth == 7}"
                                                                    (click)="setSelectorContainerwidth(7)"> 7
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 8 , 'lasttviewtab' : containeSelectorWidth == 8}"
                                                                    (click)="setSelectorContainerwidth(8)"> 8
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 9 , 'lasttviewtab' : containeSelectorWidth == 9}"
                                                                    (click)="setSelectorContainerwidth(9)"> 9
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 10 , 'lasttviewtab' : containeSelectorWidth == 10}"
                                                                    (click)="setSelectorContainerwidth(10)"> 10
                                                                </td>
                                                                <td [ngClass]="{'middleviewtab' : containeSelectorWidth >= 11 , 'lasttviewtab' : containeSelectorWidth == 11}"
                                                                    (click)="setSelectorContainerwidth(11)"> 11
                                                                </td>
                                                                <td [ngClass]="{'lasttviewtab' : containeSelectorWidth >= 12 , 'lasttviewtab' : containeSelectorWidth == 12}"
                                                                    (click)="setSelectorContainerwidth(12)"> 12
                                                                </td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <button (click)="addContainerView()" nbButton size="xsmall">
                                                            Ajouter contenaire
                                                        </button>
                                                    </div>
                                                </div>
                                                <br>
                                                <!--  <div contentEditable="true" style="height:89% !important;" #renderView class="row"
                                                       [(innerHtml)]="htmlval">

                                                  </div> -->

                                                <nb-tabset full-heigth full-heigth-all-child>
                                                    <nb-tab tabTitle="Edition" #editionTab full-heigth  lazyLoad >
                                                        <editor   #edfs
                                                                [(ngModel)]="this.viewReportConfig[this.selectedList.listId].htmlval"
                                                                (click)="stopClickEditor($event)"
                                                                [init]="editViewInit"  ></editor>



                                                    </nb-tab>
                                                    <nb-tab tabTitle="Visualisation" #visualisationTab full-heigth lazyLoad>

                                                        <editor   #edfsv
                                                                  [(ngModel)]="this.viewReportConfig[this.selectedList.listId].htmlvalv"
                                                                  (click)="stopClickEditor($event)"
                                                                  [init]="{plugins: 'table image imagetools link fullscreen autoresize'}" ></editor>
                                                    </nb-tab>
                                                </nb-tabset>

                                            </nb-card-body>
                                        </nb-card>
                                    </div>
                                </div>


                            </nb-tab>
                          <nb-tab #customTab tabTitle="Action avancé" full-heigth full-heigth-all-child>

                              <ace-editor
                                 [(text)]="text"
                                     #editor style="height:150px;"></ace-editor>

                        </nb-tab  >

                        </nb-tabset>


                    </div>


                    <div class="col-md-2" style="height: 25%;">

                        <nb-flip-card #fliplist full-heigth full-heigth-all-child>

                            <nb-card-front full-heigth full-heigth-all-child>


                                <nb-card full-heigth full-heigth-all-child  (click)="trygerDeselecttion('selectedList')" >

                                    <nb-card-header noborder style="text-align: center !important">
                                        <div title>View</div>
                                        <button nbButton size="xsmall" (click)="onAddList($event)">+</button>
                                    </nb-card-header>

                                    <nb-card-body>


                                        <nb-list>
                                            <nb-list-item *ngFor="let lst of allList" menuPadding
                                                          [ngClass]="{'selectedList' :  lst.listId == selectedList.listId || listInStep( lst.listId ) }"
                                                          (click)="selectList(lst,$event)">
                                                <div containerFlex>
                                                    <div inlineelement>
                                                        <strong>{{lst.listName}}</strong>
                                                    </div>
                                                    <div inlineelement>

                                                        <i *ngIf="lst.listIsMain != 1" colorPrimary ActionIcone
                                                           class="fa fa-times"
                                                           (click)="deleteView(lst.listId,$event)"></i>
                                                        <i ActionIcone colorInactive
                                                           (click)="ToggleSelectList(lst,$event)"
                                                           [ngClass]="{'colorPrimary' : selectedroleInRoles(lst.role)}"
                                                           *ngIf="selectedrole !==''"
                                                           class="fa fa-user">
                                                            <span *ngIf="selectedroleInRoles(lst.role)"> </span>
                                                            <span *ngIf="!selectedroleInRoles(lst.role)"> </span>
                                                        </i>
                                                    </div>
                                                </div>
                                            </nb-list-item>
                                        </nb-list>


                                    </nb-card-body>

                                </nb-card>


                            </nb-card-front>
                            <nb-card-back (click)="stopClick($event)" full-heigth full-heigth-all-child>


                                <nb-card full-heigth full-heigth-all-child>

                                    <nb-card-header noborder>
                                        <div title>Ajouter une liste</div>
                                    </nb-card-header>
                                    <nb-card-body>

                                        <form [formGroup]="listformcontrole" (ngSubmit)="onSubmitListDetails()">
                                            <input type="text" [(ngModel)]="listform.listName" nbInput fullWidth
                                                   fieldSize="xsmall" placeholder="Designation"
                                                   formControlName="listName"><br>

                                            <input type="text" [ngModelOptions]="{standalone: true}"
                                                   [(ngModel)]="listform.listEntityName" nbInput fullWidth
                                                   fieldSize="xsmall" placeholder="Entity"
                                            ><br>


                                            <select [(ngModel)]="listform.listType"
                                                    [ngModelOptions]="{standalone: true}">
                                                <option value="1">liste simple</option>
                                                <option value="2">Rapport personalisé</option>
                                            </select>
                                            <br><br>
                                            <button style="margin-right: 10px;"
                                                    [disabled]="!listformcontrole.valid"
                                                    nbButton
                                                    type="submit" size="xsmall">
                                                Ajouter
                                            </button>

                                            <button (click)="fliplist.flipped = false" nbButton type="submit"
                                                    size="xsmall">
                                                Annuler
                                            </button>
                                        </form>

                                    </nb-card-body>

                                </nb-card>


                            </nb-card-back>
                        </nb-flip-card>
                    </div>

                    <div class="col-md-8" style="height: 25%;">

                        <nb-card full-heigth full-heigth-all-child (click)="trygerDeselecttion('selectedSteps')" >

                            <nb-card-header noborder style="text-align: left !important">

                                <div title>Step</div>

                                <div title>

                                    Add step from : <select (click)="stopClick($event)" type="text"
                                                            [(ngModel)]="stepform" nbInput fullWidth
                                                            fieldSize="xsmall">
                                    <option *ngFor="let stp of selectFrom" [value]="stp.stepId">
                                        {{stp.stepName}}
                                    </option>

                                </select>
                                    <button (click)="addStepFromProcess($event)" nbButton type="button" size="xsmall"> +
                                    </button>
                                </div>

                                <ngx-one-input-form *ngIf="selectedProcess" [placeholder]="pprocessplaceholder"
                                                    (newItem)="onAddStep($event)"></ngx-one-input-form>
                            </nb-card-header>


                            <nb-card-body>
                                <div style="padding-left: 30px;padding-right: 30px; ">

                                    <div class="stepper">

                                        <div style="display: inline-block" (click)="selectStep(step,$event)"
                                             *ngFor="let step of selectedProcess.fromsteps">

                                            <div class="divider"></div>
                                            <div class="step " id="step_{{step.stepId}}"
                                                 [ngClass]="{'active' :  step.stepId == selectedSteps.stepId  }">
                                                <div class="circle">{{step.stepSequence}}</div>
                                                <div class="label">{{step.stepName}} - <span style="color: #313131">{{step.stepId}}</span><i
                                                        colorPrimary
                                                        ActionIcone
                                                        class="fa fa-unlink"
                                                        (click)="removeStepFromProcess(step.stepId,$event)"></i>

                                                    <i ActionIcone colorInactive (click)="ToggleSelectStep(step,$event)"
                                                       [ngClass]="{'colorPrimary' : selectedroleInRoles(step.role)}"
                                                       *ngIf="selectedrole !==''"
                                                       class="fa fa-user">
                                                        <span *ngIf="selectedroleInRoles(step.role)"> </span>
                                                        <span *ngIf="!selectedroleInRoles(step.role)"> </span>
                                                    </i>
                                                </div>
                                            </div>

                                        </div>

                                        <div style="display: inline-block" (click)="selectStep(step,$event)"
                                             *ngFor="let step of selectedProcess.steps">

                                            <div class="divider"></div>
                                            <div class="step " id="step_{{step.stepId}}"
                                                 [ngClass]="{'active' :  step.stepId == selectedSteps.stepId  }">
                                                <div class="circle">{{step.stepSequence}}</div>
                                                <div class="label">{{step.stepName}} - <span style="color: #313131">{{step.stepId}}</span><i
                                                        colorPrimary
                                                        ActionIcone
                                                        class="fa fa-times"
                                                        (click)="deleteStep(step.stepId,$event)"></i>

                                                    <i ActionIcone colorInactive (click)="ToggleSelectStep(step,$event)"
                                                       [ngClass]="{'colorPrimary' : selectedroleInRoles(step.role)}"
                                                       *ngIf="selectedrole !==''"
                                                       class="fa fa-user">
                                                        <span *ngIf="selectedroleInRoles(step.role)"> </span>
                                                        <span *ngIf="!selectedroleInRoles(step.role)"> </span>
                                                    </i>
                                                </div>
                                            </div>

                                        </div>

                                    </div>


                                </div>

                            </nb-card-body>


                        </nb-card>
                    </div>

                    <div class="col-md-2" style="height: 25%;">
                        <nb-flip-card #flipaction full-heigth full-heigth-all-child>
                            <nb-card-front full-heigth full-heigth-all-child >


                                <nb-card full-heigth full-heigth-all-child  (click)="trygerDeselecttion('selectedActions')">

                                    <nb-card-header noborder style="text-align: center !important">
                                        <div title>Action</div>
                                        <button nbButton size="xsmall" (click)="onAddAction($event)">+</button>
                                    </nb-card-header>
                                    <nb-card-body>


                                        <nb-list>
                                            <nb-list-item *ngFor="let act of allAction" menuPadding
                                                          [ngClass]="{'selectedList' :  act.actionId == selectedActions.actionId || actionInStep( act.actionId ) }"
                                                          (click)="selectAction(act,$event)">
                                                <div containerFlex>
                                                    <div inlineelement>
                                                        <strong>{{act.actionName}}</strong>
                                                    </div>
                                                    <div inlineelement>

                                                        <i *ngIf="act.actionType != 1" colorPrimary ActionIcone
                                                           class="fa fa-times"
                                                           (click)="deleteAction(act.actionId,$event)"></i>
                                                        <i ActionIcone colorInactive
                                                           (click)="ToggleSelectAction(act,$event)"
                                                           [ngClass]="{'colorPrimary' : selectedroleInRoles(act.role)}"
                                                           *ngIf="selectedrole !==''"
                                                           class="fa fa-user">
                                                            <span *ngIf="selectedroleInRoles(act.role)"> </span>
                                                            <span *ngIf="!selectedroleInRoles(act.role)"></span>
                                                        </i>


                                                    </div>
                                                </div>
                                            </nb-list-item>
                                        </nb-list>


                                    </nb-card-body>

                                </nb-card>


                            </nb-card-front>
                            <nb-card-back (click)="stopClick($event)" full-heigth full-heigth-all-child>


                                <nb-card full-heigth full-heigth-all-child>

                                    <nb-card-header noborder>
                                        <div title>Ajouter une action</div>
                                    </nb-card-header>
                                    <nb-card-body>

                                        <form [formGroup]="actionformcontrole" (ngSubmit)="onSubmitActionDetails()">
                                            <input type="text" [(ngModel)]="actionform.actionName" nbInput fullWidth
                                                   fieldSize="xsmall" placeholder="Designation"
                                                   formControlName="actionName">
                                            <div *ngIf="!hideActionType && actionform.actionType != 1"
                                                 class="panelFormGroup">

                                                Type <select type="text"
                                                             [(ngModel)]="actionform.actionType"
                                                             nbInput
                                                             fullWidth
                                                             fieldSize="xsmall"
                                                             formControlName="actionType">
                                                <option value="2">Generate</option>
                                                <option value="3">Update</option>
                                                <option value="4">Delete</option>
                                                <option value="5">Print</option>
                                            </select></div>
                                            <br>
                                            <div *ngIf="!hideActionType" class="panelFormGroup">

                                                Entité :<select type="text" [(ngModel)]="actionform.actionIsmainLevel"
                                                                formControlName="actionLevelDepth"
                                                                nbInput
                                                                fullWidth
                                                                fieldSize="xsmall"
                                                                formControlName="actionIsmainLevel">
                                                <option value="1">Pricipale</option>
                                                <option value="0">Sub entity only</option>

                                            </select></div>
                                            <br>
                                            <div panelFormGroup *ngIf="actionform.actionIsmainLevel==1">

                                                Profondeur : <select type="text"
                                                                     [(ngModel)]="actionform.actionLevelDepth" nbInput
                                                                     formControlName="actionLevelDepth"
                                                                     fullWidth
                                                                     fieldSize="xsmall"
                                            >
                                                <option value="1">1</option>
                                                <option value="2">2</option>

                                            </select></div>
                                            <br>
                                            <div panelFormGroup *ngIf="actionform.actionLevelDepth==2">

                                                Mode selection : <select type="text"
                                                                         [(ngModel)]="actionform.actionExistingSubEntity"
                                                                         formControlName="actionExistingSubEntity"
                                                                         nbInput
                                                                         fullWidth
                                                                         fieldSize="xsmall"
                                            >
                                                <option value="1">oui</option>
                                                <option value="0">non</option>

                                            </select></div>
                                            <br>
                                            <div panelFormGroup
                                                 *ngIf="((actionform.actionLevelDepth == 2 || actionform.actionIsmainLevel == 0) &&  actionform.actionExistingSubEntity == 0) || actionform.actionIsmainLevel == 0">

                                                <input type="text" formControlName="actionEntityName"
                                                       [(ngModel)]="actionform.actionSubEntity" nbInput fullWidth
                                                       fieldSize="xsmall" placeholder="Entitée"> <br><br>

                                            </div>
                                            <br>

                                            <div panelFormGroup
                                                 *ngIf="((actionform.actionLevelDepth == 2 || actionform.actionIsmainLevel == 0) &&  actionform.actionExistingSubEntity == 1)">

                                                Sub Process : <select type="text"
                                                                      [(ngModel)]="actionform.actionSubProcess"
                                                                      formControlName="actionSubProcess"
                                                                      (change)="SetStepSelection($event.target.value)"
                                                                      nbInput
                                                                      fullWidth
                                                                      fieldSize="xsmall"
                                            >

                                                <option *ngFor="let pr of process" [value]="pr.processId">
                                                    {{pr.processDesignation}}
                                                </option>

                                            </select>

                                            </div>
                                            <br>
                                            <div panelFormGroup *ngIf="actionform.actionExistingSubEntity==1">

                                                From step: <select type="text"
                                                                   [(ngModel)]="actionform.actionFromStep"
                                                                   formControlName="actionFromStep"
                                                                   nbInput
                                                                   fullWidth
                                                                   fieldSize="xsmall">

                                                <option [value]=""></option>
                                                <option *ngFor="let stp of subStepSelection" [value]="stp.stepId">
                                                    {{stp.stepName}}
                                                </option>

                                            </select>

                                            </div>
                                            <br>
                                            <div panelFormGroup
                                                 *ngIf="actionform.actionLevelDepth == 2 || actionform.actionIsmainLevel == 0">

                                                Add SubEntity : <select type="text"
                                                                        [(ngModel)]="actionform.actionAddSubEntity"
                                                                        formControlName="actionAddSubEntity"
                                                                        nbInput
                                                                        fullWidth
                                                                        fieldSize="xsmall"
                                            >
                                                <option value="1">oui</option>
                                                <option value="0">non</option>

                                            </select></div>


                                            <div panelFormGroup>

                                                Go to step: <select type="text"
                                                                    [(ngModel)]="actionform.actionNextStep"
                                                                    formControlName="actionNextStep"
                                                                    nbInput
                                                                    fullWidth
                                                                    fieldSize="xsmall">

                                                <option [value]=""></option>
                                                <option *ngFor="let stp of selectedProcess.steps" [value]="stp.stepId">
                                                    {{stp.stepName}}
                                                </option>

                                            </select>

                                            </div>
                                            <br>

                                            <button style="margin-right: 10px;"
                                                    [disabled]="!actionformcontrole.valid"
                                                    nbButton
                                                    type="submit" size="xsmall">
                                                Ajouter
                                            </button>

                                            <button (click)="flipaction.flipped = false" nbButton type="submit"
                                                    size="xsmall">
                                                Annuler
                                            </button>
                                        </form>

                                    </nb-card-body>

                                </nb-card>


                            </nb-card-back>
                        </nb-flip-card>

                    </div>


                </div>


                <div class="col-md-2 paramWarp" (click)="stopClick($event)" full-heigth>

                    <nb-card full-heigth full-heigth-all-child>

                        <nb-card-header noborder style="text-align: center !important">
                            <div title>Paramétre <i *ngIf="paramexp == 0" colorPrimary ActionIcone
                                                    class="fa fa-expand"
                                                    (click)="expandParam($event)"></i>
                                <i *ngIf="paramexp == 1" colorPrimary ActionIcone
                                   class="fa fa-compress"
                                   (click)="collapsParam($event)"></i>
                            </div>
                        </nb-card-header>

                        <nb-accordion #fieldparam *ngIf="paramPanel=='viewsection'" (click)="onSettingClick($event)"
                                      full-heigth full-heigth-all-child>
                            <nb-accordion-item [expanded]="true" full-heigth full-heigth-all-child   >

                                <nb-accordion-item-header>
                                    View Section
                                </nb-accordion-item-header>
                                <nb-accordion-item-body full-heigth full-heigth-all-child auto-overflow-child >

                                    Nom de section :<br>
                                    <input type="text" [(ngModel)]="selectedViewSection.title"
                                           nbInput fullWidth
                                           fieldSize="xsmall" placeholder="Nom de section "><br>


                                    <br>



                                    Requette :<br>
                                    <textarea class="autoComplete" style="width: 100%" placeholder="Requette"
                                              [(ngModel)]="selectedViewSection.query" nbInput></textarea>



                                    <br><br>
                                    <button nbButton size="xsmall" (click)="refrechViewField()">Refrech</button>
                                    <br><br>

                                    <nb-list full-heigth full-heigth-all-child>
                                        <nb-list-item *ngFor="let viewHead of selectedViewSection.viewHead">
                                            {{viewHead.fieldName}} : <input nbInput=""
                                                                            [(ngModel)]="viewHead.fieldInterfaceName">
                                        </nb-list-item>
                                    </nb-list>


                                    <br> <br>

                                    <textarea class="autoComplete" style="width: 100%" placeholder="php expression"
                                    [(ngModel)]="selectedViewSection.expression" nbInput></textarea>

                                    <button nbButton size="xsmall" (click)="addViewConfigCustomField()">Ajouter</button>


                                    <br>

                                    <select  [(ngModel)]="TableViewFieldType"  >
                                        <option value="s">Valeur</option>
                                        <option value="t">Tableau</option>
                                    </select>


                                    <br>
                                    <button nbButton size="xsmall" (click)="saveViewConfig()">Sauvegarder</button>

                                </nb-accordion-item-body>
                            </nb-accordion-item>
                        </nb-accordion>


                        <nb-accordion #fieldparam *ngIf="paramPanel=='expression'" (click)="onSettingClick($event)"
                                      full-heigth full-heigth-all-child>

                            <nb-accordion-item [expanded]="true">
                                <nb-accordion-item-header>
                                    Expression sur champ : {{selectedField.fieldEntityName}}
                                </nb-accordion-item-header>

                                <nb-accordion-item-body>


                                    <ngx-expression [optionvar]="allFieldOption"
                                                    (valueChange)="updateFieldInActionExp($event)"
                                                    [(value)]="expValu"></ngx-expression>


                                </nb-accordion-item-body>
                            </nb-accordion-item>

                            <nb-accordion-item>
                                <nb-accordion-item-header>
                                    Champ {{selectedField.fieldEntityName}}
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>

                                </nb-accordion-item-body>
                            </nb-accordion-item>


                        </nb-accordion>


                        <nb-accordion #fieldparam *ngIf="paramPanel=='query'" (click)="onSettingClick($event)"
                                      full-heigth full-heigth-all-child>

                            <nb-accordion-item [expanded]="true">
                                <nb-accordion-item-header>
                                    Requette : {{selectedQuery.queryName}}
                                </nb-accordion-item-header>

                                <nb-accordion-item-body>


                                    Nom de requette :<br>
                                    <input type="text" [(ngModel)]="selectedQuery.queryName"
                                           nbInput fullWidth
                                           fieldSize="xsmall" placeholder="Nom de requette "><br>

                                    Enoncé de requette :<br>
                                    <input type="text" [(ngModel)]="selectedQuery.queryBody"
                                           nbInput fullWidth
                                           fieldSize="xsmall" placeholder="Enoncé de requette "><br>

                                    <button style="margin-right: 10px;"
                                            (click)="updateQuery()"
                                            nbButton
                                            type="submit" size="xsmall">
                                        Valider
                                    </button>


                                </nb-accordion-item-body>
                            </nb-accordion-item>

                            <nb-accordion-item>
                                <nb-accordion-item-header>

                                </nb-accordion-item-header>
                                <nb-accordion-item-body>

                                </nb-accordion-item-body>
                            </nb-accordion-item>


                        </nb-accordion>


                        <nb-accordion #fieldparam *ngIf="paramPanel=='process'" (click)="onSettingClick($event)"
                                      full-heigth full-heigth-all-child>

                            <nb-accordion-item [expanded]="true">
                                <nb-accordion-item-header>
                                    Process {{selectedProcess.processDesignation}}
                                </nb-accordion-item-header>

                                <nb-accordion-item-body>


                                </nb-accordion-item-body>

                            </nb-accordion-item>

                            <nb-accordion-item full-heigth full-heigth-all-child>
                                <nb-accordion-item-header>
                                    Jointure
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>


                                    Entitée départ : <select (click)="stopClick($event)"
                                                             (change)="getJoin($event,'d')">
                                    <option [value]="0">-</option>
                                    <option *ngFor="let entitie of entities" [value]="entitie.entityId">
                                        {{entitie.entityEntity}}
                                    </option>
                                </select><br><br>

                                    Entitée d'arrivé :

                                    <select (click)="stopClick($event)" (change)="getJoin($event,'a')">
                                        <option [value]="0">-</option>
                                        <option *ngFor="let entitie of entities" [value]="entitie.entityId">
                                            {{entitie.entityEntity}}
                                        </option>
                                    </select>


                                </nb-accordion-item-body>

                                <nb-accordion-item-body full-heigth full-heigth-all-child>

                                    <nb-list>

                                        <nb-list-item *ngFor="let join of joins" (click)="setJoin(join,joins)">
                                            <div class="row">
                                                <div class="col-md-10"><span *ngFor="let path of join.routePath"> -> {{path.ent}} </span>
                                                </div>
                                                <div class="col-md-2"><i colorPrimary ActionIcone
                                                                         [ngClass]="{'fa-check-circle' : join.routeState == 1  }"
                                                                         class="fa "> </i></div>
                                            </div>

                                        </nb-list-item>

                                    </nb-list>

                                </nb-accordion-item-body>

                            </nb-accordion-item>


                        </nb-accordion>


                        <nb-accordion #fieldparam *ngIf="paramPanel=='action'" (click)="onSettingClick($event)"
                                      (drag)="onSettingClick($event)"
                                      full-heigth full-heigth-all-child>

                            <nb-accordion-item [expanded]="true">
                                <nb-accordion-item-header>
                                    Action {{selectedActions.actionName}}
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>
                                    <div style="height: 500px;">
                                        <form [formGroup]="actionformcontrole" (ngSubmit)="onSubmitActionDetails()">
                                            <input type="text" [(ngModel)]="actionform.actionName" nbInput fullWidth
                                                   fieldSize="xsmall" placeholder="Designation"
                                                   formControlName="actionName">
                                            <div *ngIf="!hideActionType">

                                                Type <select type="text"
                                                             [(ngModel)]="actionform.actionType"
                                                             nbInput
                                                             fullWidth
                                                             fieldSize="xsmall"
                                                             formControlName="actionType">
                                                <option value="2">Generate</option>
                                                <option value="3">Update</option>
                                                <option value="4">Delete</option>
                                                <option value="5">Print</option>

                                            </select></div>
                                            <div *ngIf="!hideActionType">

                                                Entité :<select type="text" [(ngModel)]="actionform.actionIsmainLevel"
                                                                formControlName="actionLevelDepth"
                                                                nbInput
                                                                fullWidth
                                                                fieldSize="xsmall"
                                                                formControlName="actionIsmainLevel">
                                                <option value="1">Pricipale</option>
                                                <option value="0">Sub entity only</option>

                                            </select></div>
                                            <div *ngIf="actionform.actionIsmainLevel==1 ">

                                                Profondeur : <select type="text"
                                                                     [(ngModel)]="actionform.actionLevelDepth" nbInput
                                                                     formControlName="actionLevelDepth"
                                                                     fullWidth
                                                                     fieldSize="xsmall"
                                            >
                                                <option value="1">1</option>
                                                <option value="2">2</option>

                                            </select></div>
                                            <div *ngIf="actionform.actionLevelDepth==2 && actionform.actionType != 5">

                                                Mode selection : <select type="text"
                                                                         [(ngModel)]="actionform.actionExistingSubEntity"
                                                                         formControlName="actionExistingSubEntity"
                                                                         nbInput
                                                                         fullWidth
                                                                         fieldSize="xsmall"
                                            >
                                                <option value="1">oui</option>
                                                <option value="0">non</option>

                                            </select></div>
                                            <div *ngIf="((actionform.actionLevelDepth == 2 || actionform.actionIsmainLevel == 0) &&  (actionform.actionExistingSubEntity == 0 ||  actionform.actionType == 5)) || actionform.actionIsmainLevel == 0 ">

                                                <input type="text" formControlName="actionEntityName"
                                                       [(ngModel)]="actionform.actionSubEntity" nbInput fullWidth
                                                       fieldSize="xsmall" placeholder="Entitée">

                                            </div>

                                            <div *ngIf="((actionform.actionLevelDepth == 2 || actionform.actionIsmainLevel == 0) &&  actionform.actionExistingSubEntity == 1) && actionform.actionType != 5">

                                                Sub Process : <select type="text"
                                                                      [(ngModel)]="actionform.actionSubProcess"
                                                                      formControlName="actionSubProcess"
                                                                      (change)="SetStepSelection($event.target.value)"
                                                                      nbInput
                                                                      fullWidth
                                                                      fieldSize="xsmall"
                                            >

                                                <option *ngFor="let pr of process" [value]="pr.processId">
                                                    {{pr.processDesignation}}
                                                </option>

                                            </select>

                                            </div>
                                            <div *ngIf="actionform.actionExistingSubEntity==1 && actionform.actionType != 5">

                                                From step: <select type="text"
                                                                   [(ngModel)]="actionform.actionFromStep"
                                                                   formControlName="actionFromStep"
                                                                   nbInput
                                                                   fullWidth
                                                                   fieldSize="xsmall">

                                                <option [value]=""></option>
                                                <option *ngFor="let stp of subStepSelection" [value]="stp.stepId">
                                                    {{stp.stepName}}
                                                </option>

                                            </select>

                                            </div>
                                            <div *ngIf="(actionform.actionLevelDepth == 2 || actionform.actionIsmainLevel == 0) && actionform.actionType != 5">

                                                Add SubEntity : <select type="text"
                                                                        [(ngModel)]="actionform.actionAddSubEntity"
                                                                        formControlName="actionAddSubEntity"
                                                                        nbInput
                                                                        fullWidth
                                                                        fieldSize="xsmall"
                                            >
                                                <option value="1">oui</option>
                                                <option value="0">non</option>

                                            </select></div>


                                            <div *ngIf="actionform.actionType != 5">

                                                Go to step: <select
                                                                    [(ngModel)]="actionform.actionNextStep"
                                                                    formControlName="actionNextStep"
                                                                    nbInput
                                                                    fullWidth
                                                                    fieldSize="xsmall">

                                                <option [value]=""></option>
                                                <option *ngFor="let stp of selectedProcess.steps" [value]="stp.stepId">
                                                    {{stp.stepName}}
                                                </option>

                                            </select>

                                            </div>



                                            <div *ngIf="actionform.actionLevelDepth == 2 ">

                                                Dissocier les sous entité: <input type="checkbox"   [(ngModel)]="actionform.actionDissociateSubEntity"  formControlName="actionDissociateSubEntity"
                                                                                    nbInput
                                                                                    fieldSize="xsmall"  > <br>

                                                Titre boutton dissociation :          <input type="text" formControlName="actionDissociateSubbtnName"
                                                                                             [(ngModel)]="actionform.actionDissociateSubbtnName" nbInput fullWidth
                                                                                             fieldSize="xsmall" placeholder="Btn dissociation">  <br><br>

                                                Sub Entité Step :
                                                <select   [(ngModel)]="actionform.actionSubentityNextStepOndissociation"
                                                          formControlName="actionSubentityNextStepOndissociation"
                                                          nbInput
                                                          fullWidth
                                                          fieldSize="xsmall">
                                                    <option value="">-</option>
                                                    <option [value]="stp.stepId" *ngFor="let stp of getSubentityStep()" >{{stp.stepName}}</option>

                                            </select>



                                            </div>

                                            <button style="margin-right: 10px;"
                                                    [disabled]="!actionformcontrole.valid"
                                                    nbButton
                                                    type="submit" size="xsmall">
                                                Ajouter
                                            </button>

                                            <button (click)="flipaction.flipped = false" nbButton type="submit"
                                                    size="xsmall">
                                                Annuler
                                            </button>
                                        </form>
                                    </div>
                                </nb-accordion-item-body>
                            </nb-accordion-item>


                            <nb-accordion-item *ngIf="selectedActions.actionType == 5">
                                <nb-accordion-item-header>
                                    Editer le contenu de l'impression
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>
                                    <div style="height: 500px;">

                                        Titre :<br>
                                        <input type="text" [(ngModel)]="this.selectedActions.actionPrintPageTitle"
                                               nbInput fullWidth
                                               fieldSize="xsmall" placeholder="Titre">

                                        Entéte :<br>
                                        <editor #edh [(ngModel)]="this.selectedActions.actionPrintHead"
                                                (click)="stopClick($event)" [init]="{plugins: 'link'}"></editor>
                                        Millieu de page :<br>
                                        <editor #edm [(ngModel)]="this.selectedActions.actionPrintMiddle"
                                                (click)="stopClick($event)" [init]="{plugins: 'link'}"></editor>
                                        Bas de page :<br>
                                        <editor #edf [(ngModel)]="this.selectedActions.actionPrintFooter"
                                                (click)="stopClick($event)" [init]="{plugins: 'link'}"></editor>


                                        <br>

                                        <button style="margin-right: 10px;"
                                                [disabled]="!actionformcontrole.valid"
                                                nbButton
                                                (click)="submitPrintDetail()" size="xsmall">
                                            Sauvegarder
                                        </button>


                                    </div>

                                </nb-accordion-item-body>
                            </nb-accordion-item>

                            <nb-accordion-item>
                                <nb-accordion-item-header>
                                    Régles de gestion
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>
                                    <div style="height: 500px;">

                                        <div agField containerFlex *ngFor="let acreg of selectedActions.actionAcreg">

                                            <div inlineelement> {{acreg.acregName}}</div>
                                            <div inlineelement>
                                                <i #editUpdate colorPrimary ActionIcone
                                                   (click)="deleteAcreg(acreg,$event)"
                                                   class="fa fa-times"></i>
                                                <i #editUpdate colorPrimary ActionIcone
                                                   (click)="setExpressionAcreg(acreg,$event)"
                                                   class="fa fa-pen"></i>
                                            </div>
                                        </div>

                                        <button (click)="newAcreg()" type="button" nbButton size="xsmall"> Nouvelle
                                            régle
                                        </button>
                                        <br>

                                        Nom de la régle <input nbInput fullWidth fieldSize="xsmall" paramInput
                                                               type="text" [(ngModel)]="acregForm.acregName"> <br>

                                        alias de la régle <input nbInput fullWidth fieldSize="xsmall" paramInput
                                                                 type="text" [(ngModel)]="acregForm.acregAlias"> <br>

                                        Message d'erreur <input nbInput fullWidth fieldSize="xsmall" paramInput
                                                                type="text" [(ngModel)]="acregForm.acregErrormessage">
                                        <br>


                                        <br>
                                        <ngx-expression [optionvar]="allFieldOption"
                                                        (valueChange)="updateAcregExp($event)"
                                                        [(value)]="expValuAcreg"></ngx-expression>
                                    </div>

                                </nb-accordion-item-body>
                            </nb-accordion-item>


                        </nb-accordion>


                        <nb-accordion #fieldparam *ngIf="paramPanel=='view'" (click)="onSettingClick($event)"
                                      full-heigth full-heigth-all-child>

                            <nb-accordion-item [expanded]="true">
                                <nb-accordion-item-header>
                                    View {{selectedList.actionName}}
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>
                                    <div style="height: 500px;">

                                        <br>

                                        Nom de la liste : <input nbInput fullWidth fieldSize="xsmall" paramInput
                                                               type="text" [(ngModel)]="selectedList.listName"> <br>

                                        <br>
<div *ngIf="selectedList.listIsMain != 1">
                                        Attaché à la liste principale: <input [(ngModel)]="selectedList.listIsLinked" type="checkbox" nbInput>
</div>
                                        <br>
                                        <br>
                                        <button style="margin-right: 10px;"
                                                nbButton
                                                (click)="saveListe()" size="xsmall">
                                            Sauvegarder
                                        </button>

                                    </div>
                                </nb-accordion-item-body>
                            </nb-accordion-item>

                            <nb-accordion-item>
                                <nb-accordion-item-header>
                                    Régles d'affichage
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>
                                    <div style="height: 500px;">

                                        <div agField containerFlex *ngFor="let listreg of selectedList.listReg">

                                            <div inlineelement> {{listreg.listregName}}</div>
                                            <div inlineelement>
                                                <i #editUpdate colorPrimary ActionIcone
                                                   (click)="deleteListreg(listreg,$event)"
                                                   class="fa fa-times"></i>
                                                <i #editUpdate colorPrimary ActionIcone
                                                   (click)="setExpressionListreg(listreg,$event)"
                                                   class="fa fa-pen"></i>
                                            </div>
                                        </div>

                                        <button (click)="newListreg()" type="button" nbButton size="xsmall"> Nouvelle
                                            régle
                                        </button>
                                        <br>

                                        Nom de la régle <input nbInput fullWidth fieldSize="xsmall" paramInput
                                                               type="text" [(ngModel)]="listregForm.listregName"> <br>

                                        alias de la régle <input nbInput fullWidth fieldSize="xsmall" paramInput
                                                                 type="text" [(ngModel)]="listregForm.listregAlias">
                                        <br>


                                        <br>
                                        <ngx-expression [optionvar]="allFieldOption"
                                                        (valueChange)="updateListregExp($event)"
                                                        [(value)]="expValuListreg"></ngx-expression>
                                    </div>

                                </nb-accordion-item-body>
                            </nb-accordion-item>


                        </nb-accordion>

                        <nb-accordion #fieldparam *ngIf="paramPanel=='field'" (click)="onSettingClick($event)"
                                      full-heigth full-heigth-all-child>

                            <nb-accordion-item [expanded]="true">
                                <nb-accordion-item-header>
                                    Champ {{selectedField.fieldEntityName}}
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>
                                    <div style="height: 500px;">
                                        <form [formGroup]="settingFormControl" (ngSubmit)="onSubmitField()">

                                            <strong> Id: </strong> <input paramInput type="text" readonly
                                                                          [(ngModel)]="selectedField.fieldId" nbInput
                                                                          fullWidth
                                                                          fieldSize="xsmall"
                                                                          [ngModelOptions]="{standalone: true}">
                                            <br>
                                            <strong> Nom de l'Entité: </strong><input paramInput type="text" readonly
                                                                                      [(ngModel)]="selectedField.fieldEntityName"
                                                                                      nbInput fullWidth
                                                                                      fieldSize="xsmall"
                                                                                      [ngModelOptions]="{standalone: true}">
                                            <br>

                                            <strong> Nom de l'interface: </strong> <input paramInput type="text"
                                                                                          [(ngModel)]="selectedField.fieldInterfaceName"
                                                                                          nbInput fullWidth
                                                                                          fieldSize="xsmall"
                                                                                          [ngModelOptions]="{standalone: true}">
                                            <br>


                                            <button style="margin-right: 10px;" [disabled]="!settingFormControl.valid"
                                                    nbButton
                                                    type="submit" size="xsmall">
                                                Valider
                                            </button>

                                        </form>
                                    </div>
                                </nb-accordion-item-body>
                            </nb-accordion-item>

                            <nb-accordion-item>
                                <nb-accordion-item-header>
                                    Champ {{selectedField.fieldEntityName}}
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>

                                </nb-accordion-item-body>
                            </nb-accordion-item>


                        </nb-accordion>


                        <nb-accordion #entityparam *ngIf="paramPanel=='entity'" (click)="onSettingClick($event)"
                                      full-heigth full-heigth-all-child>

                            <nb-accordion-item [expanded]="true">
                                <nb-accordion-item-header>
                                    Entité {{selectedEntity.entityEntity}}
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>
                                    <div style="height: 500px;">
                                        <form [formGroup]="settingFormControl" (ngSubmit)="onSubmitEntity()">

                                            <strong> Id: </strong> <input paramInput type="text" readonly
                                                                          [(ngModel)]="selectedEntity.entityId" nbInput
                                                                          fullWidth
                                                                          fieldSize="xsmall"
                                                                          [ngModelOptions]="{standalone: true}">
                                            <br>
                                            <strong> Nom de l'Entité : </strong><input paramInput type="text" readonly
                                                                                       [(ngModel)]="selectedEntity.entityEntity"
                                                                                       nbInput fullWidth
                                                                                       fieldSize="xsmall"
                                                                                       [ngModelOptions]="{standalone: true}">
                                            <br>

                                            <strong> Nom de l'interface : </strong> <input paramInput type="text"
                                                                                           [(ngModel)]="selectedEntity.entityInterfaceName"
                                                                                           nbInput fullWidth
                                                                                           fieldSize="xsmall"
                                                                                           [ngModelOptions]="{standalone: true}">
                                            <br>

                                            <strong> Champ à Affiché: </strong> <select paramInput
                                                                                        [(ngModel)]="selectedEntity.entityDisplayField"
                                                                                        nbInput fullWidth
                                                                                        fieldSize="xsmall"
                                                                                        [ngModelOptions]="{standalone: true}">
                                            <option *ngFor="let fld of selectedEntity.fields"
                                                    [selected]="selectedEntity.entityDisplayField == fld.fieldEntityName"
                                                    [value]="fld.fieldEntityName">{{fld.fieldEntityName}}
                                            </option>
                                        </select>
                                            <br>


                                            <strong> Champ Etat: </strong> <select paramInput
                                                                                   [(ngModel)]="selectedEntity.entityStepperField"
                                                                                   nbInput fullWidth
                                                                                   fieldSize="xsmall"
                                                                                   [ngModelOptions]="{standalone: true}">
                                            <option *ngFor="let fld of selectedEntity.fields"
                                                    [selected]="selectedEntity.entityStepperField == fld.fieldEntityName"
                                                    [value]="fld.fieldEntityName">{{fld.fieldEntityName}}
                                            </option>
                                        </select>
                                            <br>
                                            <br>
                                            <div><strong> Ordre: </strong>
                                                <div *ngFor="let fld of selectedEntity.fields"><input
                                                        [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]="fld.fieldOrder" inputOrdre><span>{{fld.fieldEntityName}}</span>
                                                    <i #rmfield colorPrimary ActionIcone
                                                       (click)="RemoveField(fld,$event)"
                                                       class="fa fa-times"></i><br>
                                                </div>
                                            </div>


                                            <br> <br>
                                            <button style="margin-right: 10px;" [disabled]="!settingFormControl.valid"
                                                    nbButton
                                                    type="submit" size="xsmall">
                                                Valider
                                            </button>

                                        </form>

                                        <br>

                                        <div><strong> Ajouter : </strong>
                                            <div>
                                                <input type="text" [(ngModel)]="newatribute.fieldName" inputNewField
                                                       placeholder="Nom du champ"><br>
                                                length <input type="text" [(ngModel)]="newatribute.length" inputOrdre
                                                              placeholder=""><br>
                                                Type <select [(ngModel)]="newatribute.type"><br>
                                                <option value="integer">integer</option>
                                                <option value="string">string</option>
                                                <option value="datetime">datetime</option>
                                                <option value="float">float</option>
                                            </select>

                                                <br>
                                                <br>
                                                Many-to-One <input type="checkbox" [(ngModel)]="newatribute.oneToManys">
                                                <br>

                                                With association Field <select [(ngModel)]="newatribute.fieldrelation">
                                                <option *ngFor="let fldopt of allFieldOption"
                                                        [value]="fldopt.variableId">{{fldopt.name}}
                                                </option>
                                            </select>

                                                Inversed <input type="checkbox" [(ngModel)]="newatribute.inversed">

                                                <br>
                                                <br>


                                                Id <input type="checkbox" [(ngModel)]="newatribute.id"><br>
                                                Null <input type="checkbox" [(ngModel)]="newatribute.notnull"><br>

                                            </div>
                                            <br>
                                            <button style="margin-right: 10px;" (click)="SaveField($event)"
                                                    nbButton
                                                    type="button" size="xsmall">
                                                Ajouter Champ
                                            </button>
                                        </div>
                                    </div>
                                </nb-accordion-item-body>
                            </nb-accordion-item>

                            <nb-accordion-item>
                                <nb-accordion-item-header>
                                    Champ agrégé
                                </nb-accordion-item-header>
                                <nb-accordion-item-body>
                                    <div style="height: 500px;">

                                        <div agField containerFlex *ngFor="let fld of agField">

                                            <div inlineelement> {{fld.fieldEntityName}}</div>
                                            <div inlineelement>
                                                <i #editUpdate colorPrimary ActionIcone
                                                   (click)="deleteAgField(fld,$event)"
                                                   class="fa fa-times"></i>
                                                <i #editUpdate colorPrimary ActionIcone
                                                   (click)="setExpressionAg(fld,$event)"
                                                   class="fa fa-pen"></i>
                                            </div>
                                        </div>

                                        <button (click)="newFieldAg()" type="button" nbButton size="xsmall"> Nouveau
                                            Champ agrégé
                                        </button>
                                        <br>

                                        Alias du champ <input nbInput fullWidth fieldSize="xsmall" paramInput
                                                              type="text" [(ngModel)]="fieldForm.fieldAlias"> <br>
                                        Nom du champ <input nbInput fullWidth fieldSize="xsmall" type="text"
                                                            [(ngModel)]="fieldForm.fieldName"><br>
                                        Type <select paramInput
                                                     [(ngModel)]="fieldForm.fieldType"
                                                     nbInput fullWidth
                                                     fieldSize="xsmall"
                                    >
                                        <option value="string">Chaine
                                        </option>
                                        <option value="float">Réel
                                        </option>
                                        <option value="integer">entier
                                        </option>
                                        <option value="datetime">Date
                                        </option>
                                    </select>

                                        <br>
                                        <ngx-expression [optionvar]="allFieldOption"
                                                        (valueChange)="updateFieldAgExp($event)"
                                                        [(value)]="expValuAg"></ngx-expression>
                                    </div>


                                </nb-accordion-item-body>
                            </nb-accordion-item>


                        </nb-accordion>


                    </nb-card>


                </div>


            </div>


        </nb-card>

    </nb-card-back>

</nb-reveal-card>


<ngx-smart-modal #addConnectionModal identifier="addConnectionModal" customClass="medium-modal"
                 (click)="stopClick($event)">

    <h1>Ajouter une connection</h1>
    <br>
    <div>
        <div labelFixedWidth> Nom de Connection :</div>
        <input [(ngModel)]="conConfig.connectionName" nbInput><br>
        <div labelFixedWidth> Driver :</div>
        <input [(ngModel)]="conConfig.connectionDriver" nbInput><br>
        <div labelFixedWidth> Db utilisateur :</div>
        <input [(ngModel)]="conConfig.connectionDbuser" nbInput><br>
        <div labelFixedWidth> Db mot de passe :</div>
        <input [(ngModel)]="conConfig.connectionDbbpassword" nbInput><br>
        <div labelFixedWidth> Db Nom :</div>
        <input [(ngModel)]="conConfig.connectionDbname" nbInput><br>
        <div labelFixedWidth> Host :</div>
        <input [(ngModel)]="conConfig.connectionHost" nbInput><br>
    </div>
    <br>
    <button type="button" nbButton size="xsmall" (click)="addConnectionConfig($event)">Save</button>

    <button type="button" nbButton size="xsmall" (click)="stopClick($event);addConnectionModal.close()">Close</button>

</ngx-smart-modal>


<ngx-smart-modal #addQueryModal identifier="addQueryModal" customClass="medium-modal"
                 (click)="stopClick($event)">

    <h1>Ajouter une requette</h1>
    <br>
    <div>
        <div labelFixedWidth> Nom de requette :</div>
        <input [(ngModel)]="query.queryName" nbInput><br>
        <div labelFixedWidth> Ennoncé de requette :</div>
        <textarea [(ngModel)]="query.queryBody" nbInput></textarea><br>

    </div>
    <br>
    <button type="button" nbButton size="xsmall" (click)="addQuery($event)">Save</button>

    <button type="button" nbButton size="xsmall" (click)="stopClick($event);addQueryModal.close()">Close</button>

</ngx-smart-modal>

<ngx-smart-modal #messageModal identifier="messageModal" customClass="medium-modal" (click)="stopClick($event)">
    <h1>System AGL</h1>
    <div *ngIf="messageModal.hasData()">
        <pre>{{ messageModal.getData()}}</pre>
    </div>
    <button type="button" nbButton size="xsmall" (click)="stopClick($event);messageModal.close()">Close</button>
</ngx-smart-modal>


<ngx-smart-modal #displayDataModal identifier="displayDataModal" customClass="medium-modal" (click)="stopClick($event)">
    <h1>Affichage des données</h1>
    <div>
        <table class="table table-striped">
            <thead>
            <tr>
                <th *ngFor="let head of displayDataHead"> {{head}}</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let content of displayDataContent">
                <th *ngFor="let headcontent of displayDataHead"> {{content[headcontent]}}</th>
            </tr>
            </tbody>
        </table>
    </div>
    <button type="button" nbButton size="xsmall" (click)="stopClick($event);displayDataModal.close()">Close</button>
</ngx-smart-modal>


<ngx-smart-modal #displayVarsModal identifier="displayVarsModal" customClass="medium-modal" (click)="stopClick($event)">
    <h1>Affichage des variable</h1>
    <div>
        <textarea style="width: 100%;height: 500px;">{{displayVarContent}}</textarea>
    </div>
    <button type="button" nbButton size="xsmall" (click)="stopClick($event);displayVarsModal.close()">Close</button>
</ngx-smart-modal>

